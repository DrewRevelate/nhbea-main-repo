(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5940],{24910:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(95155),r=s(63530),n=s(54633),l=s(12115),i=s(56104),o=s(35317),d=s(92731);function c(){let[e,t]=(0,l.useState)([]),[s,c]=(0,l.useState)(!0),[m,x]=(0,l.useState)("pending"),[p,h]=(0,l.useState)("all"),[u,v]=(0,l.useState)(null),[j,y]=(0,l.useState)(""),[b,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e="all"!==m?[(0,o._M)("status","==",m)]:[],t="all"!==m?[(0,o._M)("status","==",m)]:[],s=(0,o.P)((0,o.collection)(i.db,"professionalApplicants"),...e,(0,o.My)("submittedAt","desc")),a=(0,o.P)((0,o.collection)(i.db,"studentApplicants"),...t,(0,o.My)("submittedAt","desc")),r=(0,o.aQ)(s,e=>{g(e.docs.map(e=>{var t,s;return{id:e.id,type:"professional",...e.data(),submittedAt:null==(t=e.data().submittedAt)?void 0:t.toDate(),reviewedAt:null==(s=e.data().reviewedAt)?void 0:s.toDate()}}),"professional")}),n=(0,o.aQ)(a,e=>{g(e.docs.map(e=>{var t,s;return{id:e.id,type:"student",...e.data(),submittedAt:null==(t=e.data().submittedAt)?void 0:t.toDate(),reviewedAt:null==(s=e.data().reviewedAt)?void 0:s.toDate()}}),"student")});return()=>{r(),n()}},[m,p]);let g=(e,s)=>{t(t=>{let a=[...t.filter(e=>e.type!==s),...e];return"all"!==p&&(a=a.filter(e=>e.type===p)),a.sort((e,t)=>t.submittedAt.getTime()-e.submittedAt.getTime()),c(!1),a})},N=(e,t)=>{v(e),y(""),f(!0)},w=async e=>{if(confirm("Are you sure you want to permanently delete this ".concat(e.type," application for ").concat(e.personalInfo.firstName," ").concat(e.personalInfo.lastName,"? This action cannot be undone.")))try{let t="professional"===e.type?"professionalApplicants":"studentApplicants";await (0,o.kd)((0,o.doc)(i.db,t,e.id))}catch(e){console.error("Error deleting application:",e),alert("Error deleting application")}},A=async e=>{if(u)try{let t="professional"===u.type?"professionalApplicants":"studentApplicants",s=(0,o.doc)(i.db,t,u.id),a={status:"approve"===e?"approved":"rejected",reviewedAt:new Date,reviewedBy:"current-admin-user",reviewNotes:j};if(await (0,o.updateDoc)(s,a),"approve"===e){let e={personalInfo:u.personalInfo,...u.organization&&{organization:u.organization},...u.academicInfo&&{academicInfo:u.academicInfo},membership:{type:u.type,status:"active",renewalDate:new Date("professional"===u.type?Date.now()+31536e6:Date.now()+126144e6),autoRenewal:!1},profile:{},preferences:{emailNotifications:!0,directoryListing:!0},metadata:{createdAt:new Date,updatedAt:new Date,createdFrom:"application",applicationId:u.id}};await (0,o.addDoc)((0,o.collection)(i.db,"members"),e)}f(!1)}catch(e){console.error("Error updating application:",e),alert("Error updating application")}};return s?(0,a.jsx)(r.U,{children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsx)(d.k,{})})}):(0,a.jsx)(r.U,{children:(0,a.jsxs)(n.LQ,{requiredPermission:"canManageMembers",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"heading-2 text-[var(--nhbea-royal-blue-dark)]",children:"Application Management"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-[var(--color-text-secondary)]",children:"Review and process membership applications"})]}),(0,a.jsxs)("div",{className:"text-sm text-[var(--color-text-secondary)]",children:[e.filter(e=>"pending"===e.status).length," pending review"]})]})})}),(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-primary)] mb-1",children:"Status Filter"}),(0,a.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-[var(--color-border-primary)] rounded-md shadow-sm focus:outline-none focus:ring-[var(--nhbea-royal-blue)] focus:border-[var(--nhbea-royal-blue)]",children:[(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"}),(0,a.jsx)("option",{value:"all",children:"All Applications"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-text-primary)] mb-1",children:"Type Filter"}),(0,a.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-[var(--color-border-primary)] rounded-md shadow-sm focus:outline-none focus:ring-[var(--nhbea-royal-blue)] focus:border-[var(--nhbea-royal-blue)]",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"professional",children:"Professional"}),(0,a.jsx)("option",{value:"student",children:"Student"})]})]})]})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[e.map(e=>{var t,s,r;return(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsxs)("h3",{className:"heading-5 text-[var(--color-text-primary)]",children:[e.personalInfo.firstName," ",e.personalInfo.lastName]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("professional"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.type}),(s=e.status,(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[s]),children:s})),(r=e.paymentStatus)?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"}[r]),children:["Payment: ",r]}):null]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Email:"}),(0,a.jsx)("span",{className:"ml-1 text-[var(--color-text-secondary)]",children:e.personalInfo.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Phone:"}),(0,a.jsx)("span",{className:"ml-1 text-[var(--color-text-secondary)]",children:e.personalInfo.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Submitted:"}),(0,a.jsx)("span",{className:"ml-1 text-[var(--color-text-secondary)]",children:e.submittedAt.toLocaleDateString()})]}),"professional"===e.type&&e.organization&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Organization:"}),(0,a.jsx)("span",{className:"ml-1 text-[var(--color-text-secondary)]",children:e.organization.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Title:"}),(0,a.jsx)("span",{className:"ml-1 text-[var(--color-text-secondary)]",children:e.organization.title})]})]}),"student"===e.type&&e.academicInfo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Institution:"}),(0,a.jsx)("span",{className:"ml-1 text-[var(--color-text-secondary)]",children:e.academicInfo.institution})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Program:"}),(0,a.jsx)("span",{className:"ml-1 text-[var(--color-text-secondary)]",children:e.academicInfo.program})]})]})]}),e.essay&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Essay:"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-[var(--color-text-secondary)] line-clamp-3",children:e.essay})]}),e.reviewNotes&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("span",{className:"font-medium text-[var(--color-text-primary)]",children:"Review Notes:"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-[var(--color-text-secondary)]",children:e.reviewNotes}),(0,a.jsxs)("div",{className:"text-xs text-[var(--color-text-tertiary)] mt-1",children:["Reviewed by ",e.reviewedBy," on ",null==(t=e.reviewedAt)?void 0:t.toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 ml-4",children:["pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>N(e,"approve"),className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:[(0,a.jsx)("svg",{className:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]}),(0,a.jsxs)("button",{onClick:()=>N(e,"reject"),className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:[(0,a.jsx)("svg",{className:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]})]}),(0,a.jsxs)("button",{onClick:()=>w(e),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-red-50 hover:text-red-700 hover:border-red-300",title:"Delete application permanently",children:[(0,a.jsx)("svg",{className:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})})},e.id)}),0===e.length&&(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No applications"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No applications match the current filters."})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-[var(--color-text-secondary)]",children:"Total Applications"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-[var(--nhbea-royal-blue)]",children:e.length})]})}),(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-[var(--color-text-secondary)]",children:"Pending Review"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(e=>"pending"===e.status).length})]})}),(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-[var(--color-text-secondary)]",children:"Approved"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"approved"===e.status).length})]})}),(0,a.jsx)("div",{className:"nhbea-card",children:(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-[var(--color-text-secondary)]",children:"Professional"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>"professional"===e.type).length})]})})]})]}),b&&u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Review Application - ",u.personalInfo.firstName," ",u.personalInfo.lastName]})}),(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),(0,a.jsx)("textarea",{value:j,onChange:e=>y(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Add notes about your review decision..."})]}),"student"===u.type&&u.essay&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Essay Response"}),(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md max-h-40 overflow-y-auto",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:u.essay})})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>A("reject"),className:"px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:"Reject Application"}),(0,a.jsx)("button",{onClick:()=>A("approve"),className:"px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:"Approve Application"})]})]})})]})})}},76696:(e,t,s)=>{Promise.resolve().then(s.bind(s,24910))}},e=>{e.O(0,[9135,3965,6874,3155,7748,6766,6688,8441,5964,7358],()=>e(e.s=76696)),_N_E=e.O()}]);