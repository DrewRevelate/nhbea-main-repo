(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1905,6104],{53595:(e,s,t)=>{Promise.resolve().then(t.bind(t,79495))},56104:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>g,IG:()=>m,db:()=>o,j2:()=>u});var r=t(23915),a=t(35317),i=t(77505),n=t(45404);let c={apiKey:"AIzaSyC08Pd4oC3bTOKFnNXQtgCUx8YVVczpXZM",authDomain:"nhbea-64cab.firebaseapp.com",projectId:"nhbea-64cab",storageBucket:"nhbea-64cab.firebasestorage.app",messagingSenderId:"956870811159",appId:"1:956870811159:web:825f4c67fa29b6e1cac652"},l=!!(c.apiKey&&c.authDomain&&c.projectId&&c.storageBucket&&c.messagingSenderId&&c.appId);l||console.error("Firebase configuration is incomplete. Required fields:",{apiKey:!!c.apiKey,authDomain:!!c.authDomain,projectId:!!c.projectId,storageBucket:!!c.storageBucket,messagingSenderId:!!c.messagingSenderId,appId:!!c.appId});let d=null,o=null,m=null,u=null;if(l)try{d=0===(0,r.Dk)().length?(0,r.Wp)(c):(0,r.Sx)(),o=(0,a.aU)(d),m=(0,i.c7)(d),u=(0,n.xI)(d),console.log("✅ Firebase initialized successfully")}catch(e){console.error("❌ Failed to initialize Firebase:",e)}else console.warn("⚠️ Firebase not initialized - missing configuration");let g=d},79495:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(95155),a=t(12115),i=t(35317),n=t(56104);let c={super_admin:["users:create","users:read","users:update","users:delete","members:create","members:read","members:update","members:delete","conferences:create","conferences:read","conferences:update","conferences:delete","awards:create","awards:read","awards:update","awards:delete","content:create","content:read","content:update","content:delete","nominations:create","nominations:read","nominations:update","nominations:delete","system:config","system:audit","system:backup","system:restore"],admin:["members:create","members:read","members:update","conferences:create","conferences:read","conferences:update","awards:create","awards:read","awards:update","content:create","content:read","content:update","nominations:read","nominations:update","system:audit"]};function l(){var e;let[s,t]=(0,a.useState)("idle"),[l,d]=(0,a.useState)([]),[o,m]=(0,a.useState)({email:"drew@revelateops.com",password:"",confirmPassword:"",displayName:"Drew Lambert"}),[u,g]=(0,a.useState)(!1),p=e=>{d(s=>[...s,"".concat(new Date().toLocaleTimeString(),": ").concat(e)])};(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{(await (0,i.x7)((0,i.doc)(n.db,"cms_config","main"))).exists()&&(g(!0),p("✅ CMS security system already configured"))}catch(e){p("ℹ️ No existing security configuration found")}},h=async()=>{try{await (0,i.BN)((0,i.doc)(n.db,"cms_config","main"),{version:"1.0.0",features:{auditLogging:!0,roleBasedAccess:!0,dataValidation:!0,backupEnabled:!0},security:{requireEmailVerification:!1,sessionTimeout:3600,maxLoginAttempts:5,passwordMinLength:8},ui:{theme:"nhbea",primaryColor:"#1E3A8A",secondaryColor:"#DC2626",logo:"/nhbea-logo.png"},createdAt:(0,i.serverTimestamp)(),updatedAt:(0,i.serverTimestamp)()}),p("✅ CMS configuration initialized")}catch(e){throw p("❌ Error initializing CMS config: ".concat(e)),e}},b=async()=>{try{await (0,i.BN)((0,i.doc)(n.db,"admin_roles","roles"),{super_admin:{name:"Super Administrator",description:"Full system access including user management",permissions:c.super_admin},admin:{name:"Administrator",description:"Content and member management access",permissions:c.admin},content_editor:{name:"Content Editor",description:"Content creation and editing access",permissions:["content:create","content:read","content:update"]},createdAt:(0,i.serverTimestamp)(),updatedAt:(0,i.serverTimestamp)()}),p("✅ Security roles configured")}catch(e){throw p("❌ Error setting up security roles: ".concat(e)),e}},y=async(e,s,t)=>{try{if(p("\uD83D\uDD27 Setting up admin user: ".concat(e,"...")),!n.j2.currentUser)throw Error("No authenticated user found. Please sign in first.");let s=n.j2.currentUser.uid,r=n.j2.currentUser.email;p("✅ Using current authenticated user: ".concat(r)),p("   UID: ".concat(s));let a={uid:s,email:r||e,displayName:n.j2.currentUser.displayName||t,role:"super_admin",permissions:c.super_admin,createdAt:(0,i.serverTimestamp)(),updatedAt:(0,i.serverTimestamp)(),isActive:!0};return await (0,i.BN)((0,i.doc)(n.db,"admin_users",s),a,{merge:!0}),p("✅ Admin user record updated successfully: ".concat(r," (super_admin)")),p("   Display Name: ".concat(a.displayName)),s}catch(e){throw p("❌ Error setting up admin user: ".concat(e.message)),e}},f=async()=>{if(!n.j2.currentUser)return void alert("Please sign in first before running the security setup");t("running"),d([]);try{p("\uD83D\uDE80 Starting NHBEA FireCMS Security Setup"),p("================================"),p("ℹ️ Note: You must be signed in as an existing admin user first"),p("ℹ️ Bootstrap mode active - setup allowed for: ".concat(o.email)),await h(),await b(),await y(o.email,"",o.displayName),p("✅ FireCMS Security Setup Complete!"),p("\uD83D\uDCDD Next Steps:"),p("   1. Enhanced Firestore rules deployed ✅"),p("   2. Admin user created ✅"),p("   3. Security roles configured ✅"),p("   4. Test admin authentication flow"),t("complete")}catch(e){p("❌ Setup failed: ".concat(e.message)),t("error")}},j=async()=>{confirm("Are you sure you want to reset the security setup? This will overwrite existing configuration.")&&(g(!1),t("idle"),d([]))};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDD12 NHBEA FireCMS Security Setup"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Initialize enterprise-grade security for your content management system"})]}),u&&"idle"===s&&(0,r.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-green-800 font-medium",children:"Security System Already Configured"}),(0,r.jsx)("p",{className:"text-green-700 text-sm",children:"Your NHBEA CMS security system is already set up and running."})]}),(0,r.jsx)("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Reconfigure"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Admin User Configuration"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Email"}),(0,r.jsx)("input",{type:"email",value:o.email,onChange:e=>m(s=>({...s,email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:"running"===s||"complete"===s})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),(0,r.jsx)("input",{type:"text",value:o.displayName,onChange:e=>m(s=>({...s,displayName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:"running"===s||"complete"===s})]}),(0,r.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Using Current User"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-blue-700",children:["Setup will configure the currently signed-in user (",(null===n.j2||void 0===n.j2||null==(e=n.j2.currentUser)?void 0:e.email)||"unknown",") as super administrator."]})]})]})}),(0,r.jsxs)("button",{onClick:f,disabled:"running"===s||"complete"===s,className:"w-full py-3 px-4 rounded-lg font-medium ".concat("running"===s?"bg-gray-400 cursor-not-allowed":"complete"===s?"bg-green-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:["running"===s&&"\uD83D\uDD04 Setting up security...","complete"===s&&"✅ Setup Complete","idle"===s&&"\uD83D\uDE80 Initialize Security System","error"===s&&"\uD83D\uDD04 Retry Setup"]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Setup Progress"}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg h-96 overflow-y-auto font-mono text-sm",children:0===l.length?(0,r.jsx)("p",{className:"text-gray-500",children:"Ready to initialize security system..."}):l.map((e,s)=>(0,r.jsx)("div",{className:"mb-1",children:e},s))})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\uD83D\uDD10 Security Features Being Deployed"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83C\uDFAF Role-Based Access Control"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Super Admin - Full system access"}),(0,r.jsx)("li",{children:"• Admin - Content management"}),(0,r.jsx)("li",{children:"• Content Editor - Publishing rights"}),(0,r.jsx)("li",{children:"• Read Only - View permissions"})]})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDEE1️ Data Protection"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Field-level validation"}),(0,r.jsx)("li",{children:"• PII data encryption"}),(0,r.jsx)("li",{children:"• Audit trail logging"}),(0,r.jsx)("li",{children:"• GDPR compliance"})]})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"⚡ Performance & Monitoring"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Optimized security rules"}),(0,r.jsx)("li",{children:"• Real-time monitoring"}),(0,r.jsx)("li",{children:"• Error tracking"}),(0,r.jsx)("li",{children:"• Cost optimization"})]})]})]})]}),"complete"===s&&(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"\uD83C\uDF89 Setup Complete!"}),(0,r.jsx)("p",{className:"text-green-700 mb-4",children:"Your NHBEA FireCMS security system is now active."}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)("a",{href:"/admin/cms",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\uD83D\uDE80 Access FireCMS"}),(0,r.jsx)("a",{href:"/admin/login",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"\uD83D\uDD10 Admin Login"})]})]})})]})})}}},e=>{e.O(0,[9135,3965,3155,7748,8441,5964,7358],()=>e(e.s=53595)),_N_E=e.O()}]);